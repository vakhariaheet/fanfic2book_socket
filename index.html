<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Document</title>
	</head>
	<body>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
		<script src="https://html2canvas.hertzen.com/dist/html2canvas.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/dompurify@2.3.3/dist/purify.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/es6-promise@4.2.8/dist/es6-promise.auto.min.js"></script>
		<script src="./html2pdf.bundle.js"></script>
		<script type="module">
			import { bookData } from 'https://res.cloudinary.com/xdidhn1mvm/raw/upload/v1650392469/F-12265183_omq2u5.js';

			const htmlString = `
			<h1>
			<a href="${bookData.url}" target="_blank">${bookData.title}</a> by
			<a href="${bookData.authorUrl}" target="_blank">${bookData.author}</a>
		</h1>
		<div class="chapters">
			<button class="btn">Chapters</button>
			<div class="chapterList"></div>
		</div>
		${bookData.fandom ? `<h4>Fandom : ${bookData.fandom}</h4>` : ''} 
		${bookData.language ? `<h4>Language : ${bookData.language}</h4>` : ''} 
		${bookData.words ? `<h4>Words : ${bookData.words}</h4>` : ''} 
		${bookData.published ? `<h4>Published : ${bookData.published}</h4>` : ''}
		 ${
				bookData.updated
					? `
		<h4>Updated : ${bookData.updated}</h4>
		`
					: ''
			} ${
				bookData.status
					? `
		<h4>Status : ${bookData.status}</h4>
		`
					: ''
			} ${
				bookData.description
					? `
		<h4>Summary : ${bookData.description}</h4>
		`
					: ''
			} ${
				bookData.rating
					? `
		<h4>Rating : ${bookData.rating}</h4>
		`
					: ''
			} ${
				bookData.chapters
					? `
		<h4>Chapters : ${bookData.chapters}</h4>
		`
					: ''
			}
				<div class="container">
					${bookData.book
						.map(
							(chapter) => `
							<bookmark title="${chapter.title}" level="0" ></bookmark>
							<h2>${chapter.title}</h2>
							<div class="content" >${chapter.data}</div>
						`,
						)
						.join('\n')}
				</div>
			`;

			const html = document.createElement('div');
			html.innerHTML = htmlString;
			console.log(htmlString);
			html2pdf(html, {
				margin: 0.5,
				filename: 'book.pdf',
				image: { type: 'jpeg', quality: 1 },
				html2canvas: { scale: 2, logging: true },
				jsPDF: { unit: 'in', format: 'letter', orientation: 'portrait' },
			});
		</script>
	</body>
</html>
